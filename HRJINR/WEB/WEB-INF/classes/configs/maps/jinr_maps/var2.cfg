

<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <title>ОИЯИ</title>
    <script src="js/jquery-3.4.0.js"></script>
    <link rel="stylesheet" href="jinr_maps_var2/css/style.css">
    <link rel="stylesheet" href="jinr_maps_var2/css/leaflet.css" />
    <script src="jinr_maps_var2/js/leaflet.js"></script>
    <script src="jinr_maps_var2/js/Leaflet.ImageOverlay.Rotated.js"></script>
    <script src="jinr_maps_var2/js/topoConfig.js"></script>
    <script src="jinr_maps_var2/js/geo_objects.js"></script>
    <script src="jinr_maps_var2/js/draw_objects.js"></script>
<script src="https://kit.fontawesome.com/0b1b7c23c7.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="#jsPath#jquery-ui-1.10.1.css" />
<link rel="stylesheet" href="#jsPath#default/style.min.css" />
<script type="text/javascript" src="#jsPath#jquery-1.11.0.min.js"></script>
<script src="#jsPath#jquery-ui-1.10.1.min.js" type="text/javascript"></script>

 

<SCRIPT language=JavaScript src="#jsPath#lib.js"></SCRIPT>
<link rel="stylesheet" href="/hrlhep/css/sed.css" /> ??cache_cfg=true&ZZZ
<SCRIPT language=JavaScript src="#jsPath#sed.js"></SCRIPT>  ??cache_cfg=true&ZZZ

    $INCLUDE free/main_js_noDB.cfg[js] 
    $INCLUDE free/main_js_noDB.cfg[css] 

</head>



[main]

    $INCLUDE dat/common.dat[head]
        <style>
            body {
                background:url(#imgPath#wait.gif); ??
                background-color: ##F5F5F5;
            }
        </style>
        <link rel="icon" type="image/png" href="#imgPath#favicon.png" />
    </head>

    <body id="body">
    $INCLUDE dat/common.dat[scripts]

    $INCLUDE dat/common.dat[form]

    <script src="jinr_maps_var2/js/topoConfig.js"></script>
    <script src="jinr_maps_var2/js/geo_objects.js"></script>
    <script src="jinr_maps_var2/js/draw_objects.js"></script>


<body>
    <style>
        .leaflet-popup-tip-container {
            display: none;
        }

        .leaflet-tooltip-top:before,
        .leaflet-tooltip-bottom:before,
        .leaflet-tooltip-left:before,
        .leaflet-tooltip-right:before {}

        .lhep_obj_tooltip {
            position: absolute;
            pointer-events: none;
            background: none
                /* transparent*/
            ;
            text-shadow: 2px 2px 2px black, 0 0 1em red;
            /* Параметры тени */
            color: white;
            /* Белый цвет текста */
            font-size: 1em;
            /* Размер надписи */
            border: none;
        }

        .leaflet-tooltip-left.myCSSClass::before {
            border-left-color: cyan;
        }

        .leaflet-tooltip-right.myCSSClass::before {
            border-right-color: cyan;
        }









body {
    display: flex;
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
}

.kap_container {
    margin: 0 auto;
}

header {
    display: block;
}

.kap_main-header {
    background-color: #efefef;
    font-style: normal;
    font-weight: 400;
    z-index: 7;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: fixed;
    width: 100%;
}

.kap_bl_1 {
    display: block;
    color: inherit;
    font-style: normal;
    font-weight: 400;
    background-color: #292929;
    color: #999999;
    font-family: PT Sans, Trebuchet MS, Tahoma, sans-serif;
    font-size: 14px;
    height: 40px;
    overflow: hidden;
    padding: 0 5%;
}

.kap_bl_1 h1 {
    float: left;
    font-size: 14px;
    font-weight: 400;
    left: -8px;
    margin: 0;
    padding: 6px 0;
    position: relative;
}

h1 {
    display: block;
    color: #999999;
    font-family: PT Sans, Trebuchet MS, Tahoma, sans-serif;
    font-style: normal;
}

.kap_bl_1 h1 a {
    color: #ffffff;
}

.kap_bl_1 a {
    color: #cccccc;
    border-radius: 5px;
    display: inline-block;
    padding: 6px 8px;
    text-decoration: none;
}

.kap_bl_1 h1 span {
    color: #999999;
    padding: 0;
    font-style: normal;
}

.kap_bl_1 ul {
    float: right;
    list-style: none;
    margin: 0;
    position: relative;
    right: -8px;
}

ul {
    display: block;
    color: #999999;
    font-family: PT Sans, Trebuchet MS, Tahoma, sans-serif;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    padding-inline-start: 50px;
}

.kap_bl_1 li {
    display: block;
    float: left;
    margin-left: 1em;
    padding: 6px 0;
}

li {
    text-align: center;
    list-style: none;
    color: #999999;
    font-family: PT Sans, Trebuchet MS, Tahoma, sans-serif;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
}

.kap_bl_2 {
    box-sizing: border-box;
    display: flex;
    height: 64px;
    position: relative;
    width: 100%;
}

.kap_title {
    color: #000000;
    overflow: hidden;
    padding: 20px;
    padding-left: 30px;
    font-size: 20px;
    z-index: 1;
}

.kap_bl_1 a:hover {
    background: #000000;
    color: #ffffff;
}

.kap_structure {
    /* padding-top: 104px; */
    height: 100%;
    overflow-y: auto;
    background-color: #ffffff;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 6;
}

.kap_block1 {
    height: 850px;
    float: left;
    overflow: scroll;
}

.kap_block1 ul {
    position: relative;
    right: 40px;
}

.kap_block1 li {
    text-align: left;
}

.kap_block1 a {
    color: #585858;
    display: inline-block;
    padding: 6px 25px;
    text-decoration: none;
    text-align: left;
}

ul .kap_block {
    display: table;
}

ul .kap_block img,
ul .kap_block span {
    display: table-cell;
    vertical-align: middle;
}

ul .kap_block span {
    padding-left: 15px;
    font-size: 14px;
    width: 244px;
}

hr {
    margin: 3px 0 4px;
    border: none;
    border-bottom: 1px solid;
    border-bottom-color: #e0e0e0;
    height: 0;
    display: block;
    overflow: hidden;
}

.kap_copyright {
    bottom: 5px;
    color: #5e5d5d;
    font-size: 10px;
    height: 20px;
    margin-left: 130px;
    position: absolute;
}

.kap_block2 {
    margin-left: 350px;
    border: 2px solid red;
}

.kap_structure .kap_layout-column {
    height: 860px;
    width: 1565px;
    max-width: 100%;
    max-height: 100%;
    background: white;
}

.kap_block1 a:hover {
    box-shadow: 0 0 3px #0000FF;
    color: #0000FF;
}

details {
    margin-left: 75px;
    margin-top: -22px;
}

summary {
    margin-left: -35px;
}

details ul {
    position: relative;
    top: -10px;
    padding-left: 45px;
    margin: 2px 2px;
}

summary span {
    text-align: left;
    position: relative;
    top: -17px;
}

#det_labs details {
    position: relative;
    padding: 5px;
    top: 15px;
    left: -55px;
}

details #tbl_b_DLNP,
details #tbl_b_BBLTP,
details #tbl_b_FLNP,
details #tbl_b_FLNR,
details #tbl_b_MLIT,
details #tbl_b_LRB {
    position: relative;
    top: -20px;
    text-align: left;
    left: -10px;
    margin: 2px;
}


#det_train details {
    position: relative;
    padding: 5px;
    top: 15px;
    left: -55px;
}

button{
    margin: 2px;
}












    </style>


    <section class="kap_structure">
        <div class="kap_container">
            <div class="kap_block1">
                <div class=searchbox>
                <h3>
                    Поиск зданий
                </h3>    
                    <br>
                    <input id=srcbld type=text >
                    <div id=src_bld_res>
                        <table id=src_bld_tbl>
                        </table>
                    </div>

                    
                </div>

                <div>
                    <ul>
                        <li onclick="map.removeLayer(esri);
                                map.addLayer(osm);
">
                            <a href="#" class="kap_block"> <img src="img/plan.png" width="35" height="35">
                                <span>Plan</span></a>
                        </li>
                        <li onclick="map.removeLayer(osm);
map.addLayer(esri);
">
                            <a href="#" class="kap_block"><img src="img/satellite.png" width="35" height="35">
                                <span>Satellite</span></a>
                        </li>
                        <li>
                            <a href="#" class="kap_block"> <img src="img/lab.png" width="35" height="35" 
                            onclick="
                                    var labs = document.getElementById('det_labs');
                                    console.log(labs);
                                    labs.open = !labs.open;
                                    //labs.removeAttribute(" open ");
                                 "
                                 >
                                <details id="det_labs">
                                    <summary><span><input  style="display:none"  type="checkbox" id="b_lab" name="b_lab" value="b_lab">
                                            <LNG>Лаборатории</LNG>
                                        </span></summary>
                                    <ul>
                                        <li>
                                            <details>
                                                <summary><span> <input type="checkbox" id="b_LHEP" name="b_LHEP"
                                                            value="b_LHEP">
                                                        <label for="b_LHEP">
                                                            <LNG>ЛФВЭ</LNG>
                                                        </label></span></summary>
                                                        <table id="tbl_b_DLHEP"> </table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>
                                                <summary> <span><input type="checkbox" id="b_DLNP" name="b_DLNP"
                                                            value="b_DLNP" idobj="b_DLNP" onclick="checkType(this);">
                                                        <label for="b_DLNP">
                                                            <LNG>ЛЯП</LNG>
                                                        </label>
                                                    </span></summary>
                                                <table id="tbl_b_DLNP"> </table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>
                                                <summary> <span> <input type="checkbox" id="b_BBLTP" name="b_BBLTP"
                                                            value="b_BBLTP" idobj="b_BBLTP" onclick="checkType(this);">
                                                        <label for="b_BBLTP">
                                                            <LNG>ЛТФ</LNG>
                                                        </label>
                                                    </span></summary>
                                                <table id="tbl_b_BBLTP"> </table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>
                                                <summary> <span> <input type="checkbox" id="b_FLNP" name="b_FLNP"
                                                            value="b_FLNP" idobj="b_FLNP" onclick="checkType(this);">
                                                        <label for="b_FLNP">
                                                            <LNG>ЛНФ</LNG>
                                                        </label>
                                                    </span></summary>
                                                <table id="tbl_b_FLNP"> </table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>
                                                <summary> <span> <input type="checkbox" id="b_FLNR" name="b_FLNR"
                                                            value="b_FLNR" idobj="b_FLNR" onclick="checkType(this);">
                                                        <label for="b_FLNR">
                                                            <LNG>ЛЯР</LNG>
                                                        </label>
                                                    </span></summary>
                                                <table id="tbl_b_FLNR"> </table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>
                                                <summary> <span> <input type="checkbox" id="b_MLIT" name="b_MLIT"
                                                            value="b_MLIT" idobj="b_MLIT" onclick="checkType(this);">
                                                        <label for="b_MLIT">
                                                            <LNG>ЛИТ</LNG>
                                                        </label>
                                                    </span></summary>
                                                <table id="tbl_b_MLIT"> </table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>
                                                <summary> <span> <input type="checkbox" id="b_LRB" name="b_LRB"
                                                            value="b_LRB" idobj="b_LRB" onclick="checkType(this);">
                                                        <label for="b_LRB">
                                                            <LNG>ЛРБ</LNG>
                                                        </label>
                                                    </span></summary>
                                                <table id="tbl_b_LRB"> </table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>
                                                <summary><span> <input type="checkbox" id="b_UC" name="b_UC"
                                                            value="b_UC">
                                                        <label for="b_UC">
                                                            <LNG>УНЦ</LNG>
                                                        </label></span></summary>
                                            </details>
                                        </li>
                                    </ul>
                                </details>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="kap_block"> <img src="img/op.png" width="35" height="35"
                            onclick="
                            var labs = document.getElementById('det_general');
                            console.log(labs);
                            labs.open = !labs.open;
                            //labs.removeAttribute(" open ");
                            "
                                
                                
                                
                                >
                                <details id="det_general">
                                    <summary><span><input style="display: none;" type="checkbox" id="b_" name="b_"
                                                value="b_">
                                            <LNG>Общеинституские подразделения</LNG>
                                        </span></summary>
                                    <ul>
                                        <li>
                                            <input type="checkbox" id="b_DO" name="b_DO" value="b_DO">
                                            <label for="b_DO">
                                                <LNG>Аппарат директора Института</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_BEPD" name="b_BEPD" value="b_BEPD">
                                            <label for="b_BEPD">
                                                <LNG>Департамент бюджетной и экономической политики</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_HRRMD" name="b_HRRMD" value="b_HRRMD">
                                            <label for="b_HRRMD">
                                                <LNG>Департамент кадров и делопроизводства</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_ICD" name="b_ICD" value="b_ICD">
                                            <label for="b_ICD">
                                                <LNG>Департамент международного сотрудничества</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_DDSD" name="b_DDSD" value="b_DDSD">
                                            <label for="b_DDSD">
                                                <LNG>Департамент развития цифровых сервисов</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_DSOA" name="b_DSOA" value="b_DSOA">
                                            <label for="b_DSOA">
                                                <LNG>Департамент научно-организационной деятельности</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_AD" name="b_AD" value="b_AD">
                                            <label for="b_AD">
                                                <LNG>Бухгалтерия</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_LD" name="b_LD" value="b_LD">
                                            <label for="b_LD">
                                                <LNG>Юридический отдел</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_IAS" name="b_IAS" value="b_IAS">
                                            <label for="b_IAS">
                                                <LNG>Служба внутреннего аудита</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_CEO" name="b_CEO" value="b_CEO">
                                            <label for="b_CEO">
                                                <LNG>Служба главного инженера ОИЯИ</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_CSSO" name="b_CSSO" value="b_CSSO6">
                                            <label for="b_CSSO">
                                                <LNG>Служба главного ученого секретаря</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_PCDD" name="b_PCDD" value="b_PCDD">
                                            <label for="b_PCDD">
                                                <LNG>Департамент развития имущественного комплекса</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_CCD" name="b_CCD" value="b_CCD">
                                            <label for="b_CCD">
                                                <LNG>Отдел капитального строительства</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_SU" name="b_SU" value="b_SU">
                                            <label for="b_SU">
                                                <LNG>Хозрасчетные подразделения</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_SIMO" name="b_SIMO" value="b_SIMO">
                                            <label for="b_SIMO">
                                                <LNG>Управление социальной инфраструктуры</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_HRCMO" name="b_HRCMO" value="b_HRCMO">
                                            <label for="b_HRCMO">
                                                <LNG>Управление гостинично-ресторанного комплекса</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_CPED" name="b_CPED" value="b_CPED">
                                            <label for="b_CPED">
                                                <LNG>Отдел главного энергетика</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_MTS" name="b_MTS" value="b_MTS">
                                            <label for="b_MTS">
                                                <LNG>Автохозяйство</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_FTI" name="b_FTI" value="b_FTI">
                                            <label for="b_FTI">
                                                <LNG>УПА, УТС и ОКИП</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_SAD_DLNP" name="b_SAD_DLNP" value="b_SAD_DLNP">
                                            <label for="b_SAD_DLNP">
                                                <LNG>НХП «Отдел фазотрона» (ЛЯП)</LNG>
                                            </label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="b_SAD_FLNR" name="b_SAD_FLNR" value="b_SAD_FLNR">
                                            <label for="b_SAD_FLNR">
                                                <LNG>НХП ЦПФ (ЛЯР)</LNG>
                                            </label>
                                        </li>
                                    </ul>
                                </details>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="kap_block"> <img src="img/health.png" width="35" height="35"
                            onclick="
                            var labs = document.getElementById('det_medic');
                            console.log(labs);
                            labs.open = !labs.open;
                            //labs.removeAttribute(" open ");
                            "
                                
                                
                                >
                                <details id=det_medic>
                                    <summary><span><input style = "display: none;" type="checkbox" id="b_medic" name="b_medic" value="b_medic">
                                            <LNG>Медицина</LNG>
                                        </span>
                                    </summary>
                                    <table id="tbl_m_medic"></table>
                                </details>
                            </a>
                        </li>

                        <li>
                            <a href="#" class="kap_block"> <img src="images/restaurant.png" width="35" height="35"
                            onclick="
                            var labs = document.getElementById('det_cafe');
                            console.log(labs);
                            labs.open = !labs.open;
                            //labs.removeAttribute(" open ");
                            "
                                
                                
                                
                                >
                                <details id=det_cafe>
                                    <summary><span><input style="display: none;" type="checkbox" id="m_cafe" name="b_"
                                                value="m_cafe">
                                            <LNG>Столовые & Кафе</LNG>
                                        </span></summary>
                                    <table id="tbl_m_cafe"></table>

                                </details>
                            </a>
                        </li>


                        <!-- <li>
                            <a href="#" class="kap_block"> <img src="img/vo.png" width="35" height="35">
                                <details>
                                    <summary><span><input type="checkbox" id="b_" name="b_" value="b_">
                                            <LNG>Внешние организации</LNG>
                                        </span></summary>
                                    <ul>
                                        <li>
                                            <input type="checkbox" id="b_" name="b_" value="b_">
                                            <label for="b_">
                                                <LNG>Название организации</LNG>
                                            </label>
                                        </li>
                                    </ul>
                                </details>
                            </a>
                        </li>
 -->

                        <hr>
                        <li>
                            <a href="#" class="kap_block"> <img src="img/transport.png" width="35" height="35"
                            onclick="
                            var labs = document.getElementById('det_train');
                            console.log(labs);
                            labs.open = !labs.open;
                            //labs.removeAttribute(" open ");
                            "
                                
                                
                                >
                                <details id="det_train">
                                    <summary><span><input style="display: none;" type="checkbox" id="b_transport" name="b_transport"
                                                value="b_transport">
                                            <LNG>Transport</LNG>
                                        </span></summary>
                                    <ul>
                                        <li>
                                            <details>
                                                <summary> <span>
                                                        <input type="checkbox" id="b_electric_train"
                                                            name="b_electric_train" value="b_electric_train">
                                                        <label for="b_electric_train">

                                                            <LNG>Электрички</LNG>
                                                        </label><button type="button" name="raspisanie" onclick="
                                                         let raspurl =
                                                         'https://rasp.yandex.ru/search/?fromId=c215&fromName=%D0%94%D1%83%D0%B1%D0%BD%D0%B0&toId=c213&toName=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&when=%D1%81%D0%B5%D0%B3%D0%BE%D0%B4%D0%BD%D1%8F';
                                                          window.open(raspurl, '_blank').focus();
                                                                                                                    ">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                    </span></summary>
                                                <table id="tbl_b_electric_train"></table>
                                            </details>
                                        </li>
                                        <li>
                                            <details>


                                                <summary> <span> <input type="checkbox" id="b_intercity_buses"
                                                            name="b_intercity_buses" value="b_intercity_buses">
                                                        <label for="b_intercity_buses">
                                                            <LNG>Междугородние автобусы</LNG>
                                                        </label>
                                                        <button type="button" name="raspisanie" onclick="
                                                         let raspurl_bus =
                                                         'http://rata-express.ru/schedule/moscow';
                                                          window.open(raspurl_bus, '_blank').focus();
                                                                                                                    ">
                                                            <LNG>Расписание</LNG>
                                                        </button>


                                                    </span></summary>
                                                <table id="tbl_b_intercity_buses"> </table>
                                            </details>
                                        </li>
                                        <!-- <li>
                                            <details>
                                                <summary> <span> <input type="checkbox" id="b_city_buses"
                                                            name="b_city_buses" value="b_city_buses">
                                                        <label for="b_city_buses">
                                                            <LNG>Городские автобусы</LNG>
                                                        </label>
                                                    </span></summary>
                                                <table id="tbl_b_city_buses"> </table>
                                                <ul>
                                                    <li> <b>11/1</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>11/2</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 11/3</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>11/4</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 13/1</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>13/2</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 13/3</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>13/4</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>13/5</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 13/6</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 14/1</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 14/2</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 17/1</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>17/2</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>5/1</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 5/2</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 7/1</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>7/2</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 7/3</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 7/4</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li> <b>7/5</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 7/6</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li>
                                                    <li><b> 7/7</b>
                                                        <button type="button" name="raspisanie">
                                                            <LNG>Расписание</LNG>
                                                        </button>
                                                        <input type="checkbox" id="b_mar" name="b_mar" value="b_mar">
                                                        <label for="b_mar">
                                                            <LNG>Показать маршрут</LNG>
                                                        </label>
                                                    </li> -->
                                    </ul>
                                </details>
                        </li>
                    </ul>
                    </details>
                    </a>
                    </li>
                    <hr>



                    <li>
                        <a href="#" class="kap_block"> <img src="img/print.png" width="35" height="35" onclick='
				
                              printDiv("map");
				'>
                            <span>Print</span></a>
                    </li>
                    <!-- <li>
                            <a href="#" class="kap_block"> <img src="img/share.png" width="35" height="35">
                                <span>Share</span></a>
                        </li>
                        <hr> -->
                    </ul>
                </div>
            </div>
            <!--            Расположение схемы здания-->
            <div id=map class="kap_block2">
                <div class="kap_layout-column">
                    <div class="kap_feature hidden"> </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        function printDiv(printdivname) {
            var headstr = "<html><head><title>Booking Details</title></head><body>";
            var footstr = "</body>";
            var newstr = document.getElementById(printdivname).innerHTML;
            var oldstr = document.body.innerHTML;
            document.body.innerHTML = headstr + newstr + footstr;
            window.print();
            document.body.innerHTML = oldstr;
            return false;
        }
    </script>
    <script>
        var map = L.map('map').setView([56.73843836501523, 37.19048023223878], 15);
        var mymap = map;
        var osmUrl = 'https://lt-svr230.jinr.ru/tile/{z}/{x}/{y}.png';
        var osm = L.tileLayer(osmUrl, {
            maxZoom: 21,
            maxNativeZoom: 20,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">JINR</a>'
        });
        var esri = L.tileLayer(
            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                maxZoom: 20,
                maxNativeZoom: 18,
                attribution: '',
            });
        // var layers = L.control.layers({
        // 'Map': osm,
        // 'Satellite': esri,
        // }, null, {
        // collapsed: false
        // }).addTo(map);
        map.removeLayer(esri);
        map.addLayer(osm);
        //  L.control.browserPrint().addTo(map);
        var lit_ctrl = L.control.scale({
            position: 'topleft',
            metric: true
        }).addTo(map);
        var mymap = map;
        //var config = conf;
        //        makeOverlay(config);
        map.on('click', onMapClick);
        map.on('click', onMapClick);

        function onMapClick(e) {
            navigator.clipboard.writeText(e.latlng.lat + ',' + e.latlng.lng);
            $('#coord').html('Coord=[' + e.latlng.lat + ',' + e.latlng.lng + ']');
        }

        function makeOverlay(conf_data) {
            let deltaX = 0.00002;
            let deltaY = 0.00010;
            for (let i = 0; i < conf_data.length; i++) {
                if (conf_data[i].image.indexOf("No (") == -1) {
                    var topleft = L.latLng(conf_data[i].topleft[0] + deltaX, conf_data[i].topleft[1] + deltaY),
                        topright = L.latLng(conf_data[i].topright[0] + deltaX, conf_data[i].topright[1] + deltaY),
                        bottomleft = L.latLng(conf_data[i].bottomleft[0] + deltaX, conf_data[i].bottomleft[1] + deltaY);
                    var imageUrl = "img/" + conf_data[i].image;
                    L.imageOverlay.rotated(imageUrl, topleft, topright, bottomleft, {
                        opacity: 0.5
                    }).addTo(map);
                }
            }
        }
        var LeafIcon = L.Icon.extend({
            options: {
                iconSize: [30, 30],
                iconAnchor: [15, 30],
                popupAnchor: [-3, -36]
            }
        });
        for (i in map_object_types) {
            var a = map_object_types[i];
            console.log('map_object_type=' + i + ' = ' + JSON.stringify(a));
            var icon = new LeafIcon({
                iconUrl: 'images/' + a['val3']
            });
            size_x = +a['size_x'];
            size_y = +a['size_y'];
            if ((size_x * size_y) > 0) {
                icon.options.iconSize = [size_x, size_y];
                icon.options.iconAnchor = [parseInt(size_x / 2), size_y];
            }
            map_object_types[i]['icon'] = icon;
        }
        var LeafIcon = L.Icon.extend({
            options: {
                ashadowUrl: 'leaf-shadow.png',
                iconSize: [0, 0],
                shadowSize: [1, 1],
                iconAnchor: [20, 43],
                shadowAnchor: [4, 62],
                popupAnchor: [-3, -36]
            }
        });
        var mapIcons = {};
        var redmarker =  L.marker([#init_coord#], {icon: map_object_types['m_redmark']['icon']});
        var greenIcon = new LeafIcon({
                iconUrl: 'images/leaf-green.png'
            }),
            redIcon = new LeafIcon({
                iconUrl: 'images/leaf-red.png'
            }),
            orangeIcon = new LeafIcon({
                iconUrl: 'images/leaf-orange.png'
            }),
            gateIcon = new LeafIcon({
                iconUrl: 'images/JINR.png'
            });
        var mapIcons = {
            "greenIcon": greenIcon,
            "redIcon": redIcon
        }
        var lastZoom;
        var Zoom_tooltipThreshold = 17;
        var Zoom_objectThreshold = 13;

        function processZoom() {
            let zoom = mymap.getZoom();
            console.log('zoom=' + zoom)
            lastZoom = zoom;

            for (a in roads) {
                try {

                    var obj = roads[a];

                    var lobj = obj['leaflet_obj'];
                    console.log('OBJ =' + obj.obj_name)
                    if ((obj['o_type'] == 2) | (obj['o_type'] == 1) | (obj['o_type'] == 3) | (obj['o_type'] == 4)) {
                        if (zoom < Zoom_objectThreshold) {
                            lobj.remove();
                        } else {
                            lobj.addTo(mymap)
                        }
                    } else {
                        console.log('======================= SKIP!!!!')
                    }
                    if (mymap.getZoom() < Zoom_tooltipThreshold) {
                        $(".lhep_obj_tooltip").css("display", "none")
                    } else {
                        $(".lhep_obj_tooltip").css("display", "block")
                    }

                } catch (e) {}



            }

        }
        mymap.on('zoom', function () {
            processZoom(mymap.getZoom());

        });

        draw_jinr();
        processZoom();
        setTimeout(procBlink, 500);
    </script>
====================searchg
<script>
  function fillBuildSearch(){
    redmarker.remove();
    let stbl= $('##src_bld_tbl')[0];
    $('##src_bld_res').html('');
    let srcbld = $('##srcbld').val();
    if (srcbld.trim().length<1) {
        return
    };
    //console.log('src='+srcfio);
    
    AjaxCall('src_bld_res', 'c=maps/get_building_list&srcbld='+srcbld, true);  
  }



$("#srcbld").on("keyup", function(event) {
    console.log(srcbld);
    var i = event.keyCode;
    if ( i===13 ) {
        let stbl= $('##src_bld_tbl')[0];
        //debugger;
        if (typeof stbl  == "undefined" ) return;
        let row=stbl.rows[1]
        if (typeof row  == "undefined" )return;

        let theclick = new CustomEvent("click");
        row.dispatchEvent(theclick) ;
        row.click();
    } else
    {    
        fillBuildSearch()
    }
});

</script>
</body>

</html>
[end]