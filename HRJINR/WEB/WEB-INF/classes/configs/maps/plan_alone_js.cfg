TEMPLATE


[comments]
    author=Семашко
[end]

[draw rooms]
var phones = [
  { number: "2162001", room: "240a", lab: "LIT", building: 134 },
  { number: "2162312", room: "216b", lab: "LIT", building: 134 },
  { number: "2162447", room: "231", lab: "LIT", building: 134 },
  { number: "2162309", room: "225", lab: "LIT", building: 134 },
  { number: "2162302", room: "402", lab: "LIT", building: 134 },
  { number: "2162315", room: "329", lab: "LIT", building: 134 },
  { number: "2162308", room: "314", lab: "LIT", building: 134 },
  { number: "2162349", room: "242", lab: "LIT", building: 134 },
  { number: "2162360", room: "503", lab: "LIT", building: 134 },
  { number: "2162365", room: "337a", lab: "LIT", building: 134 },
  { number: "2162336", room: "423", lab: "LIT", building: 134 },
  { number: "2162401", room: "202", lab: "LIT", building: 134 },
  { number: "2162387", room: "314", lab: "LIT", building: 134 },
  { number: "2162402", room: "209", lab: "LIT", building: 134 },
  { number: "2162412", room: "207", lab: "LIT", building: 134 },
  { number: "2162410", room: "607", lab: "LIT", building: 134 },
  { number: "2162467", room: "210v", lab: "LIT", building: 134 },
  { number: "2162526", room: "324", lab: "LIT", building: 134 },
  { number: "2162547", room: "374", lab: "LIT", building: 134 },
  { number: "2162529", room: "334", lab: "LIT", building: 134 },
  { number: "2162552", room: "364", lab: "LIT", building: 134 },
  { number: "2162574", room: "310", lab: "LIT", building: 134 },
  { number: "2162569", room: "208", lab: "LIT", building: 134 },
  { number: "2162565", room: "403", lab: "LIT", building: 134 },
  { number: "2162622", room: "106b", lab: "LIT", building: 134 },
  { number: "2162630", room: "359", lab: "LIT", building: 134 },
  { number: "2162646", room: "368", lab: "LIT", building: 134 },
  { number: "2162679", room: "306", lab: "LIT", building: 134 },
  { number: "2162683", room: "518", lab: "LIT", building: 134 },
  { number: "2162692", room: "375", lab: "LIT", building: 134 },
  { number: "2162704", room: "228", lab: "LIT", building: 134 },
  { number: "2162715", room: "562", lab: "LIT", building: 134 },
  { number: "2162717", room: "105a", lab: "LIT", building: 134 },
  {
    number: "2162725",
    room: "213",
    lab: "LIT",
    building: 134,
  },
  { number: "2162724", room: "357", lab: "LIT", building: 134 },
  { number: "2162736", room: "568", lab: "LIT", building: 134 },
  { number: "2162728", room: "336", lab: "LIT", building: 134 },
  { number: "2162729", room: "361", lab: "LIT", building: 134 },
  { number: "2162731", room: "443", lab: "LIT", building: 134 },
  { number: "2162744", room: "227", lab: "LIT", building: 134 },
  { number: "2162745", room: "218", lab: "LIT", building: 134 },
  { number: "2162746", room: "370", lab: "LIT", building: 134 },
  { number: "2162752", room: "401v", lab: "LIT", building: 134 },
  { number: "2162726", room: "568", lab: "LIT", building: 134 },
  { number: "2162770", room: "569", lab: "LIT", building: 134 },
  { number: "2162761", room: "219a", lab: "LIT", building: 134 },
  { number: "2162845", room: "233", lab: "LIT", building: 134 },
  { number: "2162926", room: "106", lab: "LIT", building: 134 },
  { number: "2163010", room: "519", lab: "LIT", building: 134 },
  { number: "2163012", room: "553", lab: "LIT", building: 134 },
  { number: "2163064", room: "373", lab: "LIT", building: 134 },
  { number: "2163044", room: "306", lab: "LIT", building: 134 },
  { number: "2163078", room: "209", lab: "LIT", building: 134 },
  { number: "2163108", room: "234", lab: "LIT", building: 134 },
  { number: "2163161", room: "517", lab: "LIT", building: 134 },
  { number: "2163144", room: "349", lab: "LIT", building: 134 },
  { number: "2163141", room: "610d", lab: "LIT", building: 134 },
  { number: "2163208", room: "216", lab: "LIT", building: 134 },
  { number: "2163221", room: "539", lab: "LIT", building: 134 },
  { number: "2163247", room: "223", lab: "LIT", building: 134 },
  { number: "2163255", room: "205", lab: "LIT", building: 134 },
  { number: "2163264", room: "520", lab: "LIT", building: 134 },
  { number: "2163265", room: "403a", lab: "LIT", building: 134 },
  { number: "2163309", room: "226", lab: "LIT", building: 134 },
  { number: "2163429", room: "325", lab: "LIT", building: 134 },
  { number: "2163437", room: "353", lab: "LIT", building: 134 },
  { number: "2163428", room: "243", lab: "LIT", building: 134 },
  { number: "2163501", room: "117", lab: "LIT", building: 134 },
  { number: "2163522", room: "551", lab: "LIT", building: 134 },
  { number: "2163517", room: "521", lab: "LIT", building: 134 },
  { number: "2163526", room: "101/2", lab: "LIT", building: 134 },
  { number: "2163536", room: "506", lab: "LIT", building: 134 },
  { number: "2163549", room: "210a", lab: "LIT", building: 134 },
  { number: "2163552", room: "610", lab: "LIT", building: 134 },
  { number: "2163559", room: "529", lab: "LIT", building: 134 },
  { number: "2163566", room: "237", lab: "LIT", building: 134 },
  { number: "2163580", room: "241", lab: "LIT", building: 134 },
  { number: "2163578", room: "565", lab: "LIT", building: 134 },
  { number: "2163608", room: "369", lab: "LIT", building: 134 },
  { number: "2163598", room: "350", lab: "LIT", building: 134 },
  { number: "2163626", room: "554", lab: "LIT", building: 134 },
  { number: "2163645", room: "229", lab: "LIT", building: 134 },
  { number: "2163646", room: "238", lab: "LIT", building: 134 },
  { number: "2163635", room: "516", lab: "LIT", building: 134 },
  { number: "2163679", room: "507", lab: "LIT", building: 134 },
  { number: "2163692", room: "610v", lab: "LIT", building: 134 },
  { number: "2163673", room: "214", lab: "LIT", building: 134 },
  { number: "2163745", room: "201", lab: "LIT", building: 134 },
  { number: "2163741", room: "559", lab: "LIT", building: 134 },
  { number: "2163761", room: "403v", lab: "LIT", building: 134 },
  { number: "2163754", room: "113", lab: "LIT", building: 134 },
  { number: "2163804", room: "340", lab: "LIT", building: 134 },
  { number: "2163801", room: "201", lab: "LIT", building: 134 },
  { number: "2163811", room: "514", lab: "LIT", building: 134 },
  { number: "2163839", room: "401", lab: "LIT", building: 134 },
  { number: "2163859", room: "371", lab: "LIT", building: 134 },
  { number: "2164102", room: "604", lab: "LIT", building: 134 },
  { number: "2163879", room: "232", lab: "LIT", building: 134 },
  { number: "2163954", room: "544", lab: "LIT", building: 134 },
  { number: "2163959", room: "356", lab: "LIT", building: 134 },
  { number: "2163961", room: "546", lab: "LIT", building: 134 },
  { number: "2164003", room: "505", lab: "LIT", building: 134 },
  { number: "2164004", room: "525", lab: "LIT", building: 134 },
  { number: "2164011", room: "360", lab: "LIT", building: 134 },
  { number: "2164005", room: "556", lab: "LIT", building: 134 },
  { number: "2164019", room: "326", lab: "LIT", building: 134 },
  { number: "2164041", room: "377", lab: "LIT", building: 134 },
  {
    number: "2164033",
    room: "236",
    lab: "LIT",
    building: 134,
  },
  { number: "2164015", room: "345", lab: "LIT", building: 134 },
  { number: "2164031", room: "215", lab: "LIT", building: 134 },
  { number: "2164047", room: "545", lab: "LIT", building: 134 },
  { number: "2164012", room: "325", lab: "LIT", building: 134 },
  { number: "2164043", room: "400b", lab: "LIT", building: 134 },
  { number: "2164075", room: "244", lab: "LIT", building: 134 },
  { number: "2164080", room: "432", lab: "LIT", building: 134 },
  { number: "2164049", room: "305", lab: "LIT", building: 134 },
  { number: "2164069", room: "301", lab: "LIT", building: 134 },
  { number: "2164082", room: "321", lab: "LIT", building: 134 },
  { number: "2164073", room: "110", lab: "LIT", building: 134 },
  { number: "2164105", room: "206", lab: "LIT", building: 134 },
  { number: "2164089", room: "401b", lab: "LIT", building: 134 },
  { number: "2164135", room: "513", lab: "LIT", building: 134 },
  { number: "2164141", room: "405", lab: "LIT", building: 134 },
  { number: "2164132", room: "421", lab: "LIT", building: 134 },
  { number: "2164130", room: "405b", lab: "LIT", building: 134 },
  { number: "2164191", room: "429", lab: "LIT", building: 134 },
  { number: "2164171", room: "602", lab: "LIT", building: 134 },
  { number: "2164168", room: "610/2, 3-5 otsek", lab: "LIT", building: 134 },
  { number: "2164190", room: "612", lab: "LIT", building: 134 },
  { number: "2164195", room: "601", lab: "LIT", building: 134 },
  { number: "2164180", room: "210", lab: "LIT", building: 134 },
  { number: "2164181", room: "605", lab: "LIT", building: 134 },
  { number: "2164206", room: "202", lab: "LIT", building: 134 },
  { number: "2164238", room: "204", lab: "LIT", building: 134 },
  { number: "2164220", room: "406", lab: "LIT", building: 134 },
  { number: "2164273", room: "425", lab: "LIT", building: 134 },
  { number: "2164249", room: "555", lab: "LIT", building: 134 },
  { number: "2164283", room: "407a", lab: "LIT", building: 134 },
  { number: "2164302", room: "609/2", lab: "LIT", building: 134 },
  { number: "2164280", room: "609", lab: "LIT", building: 134 },
  { number: "2164304", room: "557", lab: "LIT", building: 134 },
  { number: "2164279", room: "215", lab: "LIT", building: 134 },
  { number: "2164294", room: "529b", lab: "LIT", building: 134 },
  {
    number: "2164318",
    room: "212",
    lab: "LIT",
    building: 134,
  },
  { number: "2164350", room: "340", lab: "LIT", building: 134 },
  { number: "2164320", room: "406", lab: "LIT", building: 134 },
  { number: "2164327", room: "566", lab: "LIT", building: 134 },
  { number: "2164328", room: "610/2", lab: "LIT", building: 134 },
  { number: "2164338", room: "367", lab: "LIT", building: 134 },
  { number: "2164371", room: "552", lab: "LIT", building: 134 },
  { number: "2164370", room: "203", lab: "LIT", building: 134 },
  { number: "2164382", room: "508", lab: "LIT", building: 134 },
  { number: "2164436", room: "603", lab: "LIT", building: 134 },
  { number: "2164425", room: "333", lab: "LIT", building: 134 },
  { number: "2164429", room: "541", lab: "LIT", building: 134 },
  { number: "2164437", room: "114", lab: "LIT", building: 134 },
  { number: "2164471", room: "539", lab: "LIT", building: 134 },
  { number: "2164452", room: "102", lab: "LIT", building: 134 },
  { number: "2164469", room: "343", lab: "LIT", building: 134 },
  { number: "2164462", room: "208", lab: "LIT", building: 134 },
  { number: "2164482", room: "209", lab: "LIT", building: 134 },
  { number: "2164486", room: "235", lab: "LIT", building: 134 },
  { number: "2164504", room: "441", lab: "LIT", building: 134 },
  { number: "2164507", room: "427", lab: "LIT", building: 134 },
  { number: "2164505", room: "610g", lab: "LIT", building: 134 },
  { number: "2164519", room: "606", lab: "LIT", building: 134 },
  { number: "2164511", room: "202", lab: "LIT", building: 134 },
  { number: "2164530", room: "403d", lab: "LIT", building: 134 },
  { number: "2164531", room: "440", lab: "LIT", building: 134 },
  { number: "2164527", room: "116, 115", lab: "LIT", building: 134 },
  { number: "2164554", room: "118, 119a", lab: "LIT", building: 134 },
  { number: "2164576", room: "216v", lab: "LIT", building: 134 },
  { number: "2164598", room: "341", lab: "LIT", building: 134 },
  { number: "2164631", room: "522", lab: "LIT", building: 134 },
  { number: "2164607", room: "406a", lab: "LIT", building: 134 },
  { number: "2164610", room: "309", lab: "LIT", building: 134 },
  { number: "2164619", room: "355", lab: "LIT", building: 134 },
  { number: "2164622", room: "354", lab: "LIT", building: 134 },
  { number: "2164605", room: "603", lab: "LIT", building: 134 },
  { number: "2164646", room: "363", lab: "LIT", building: 134 },
  {
    number: "2164660",
    room: "101/1",
    lab: "LIT",
    building: 134,
  },
  { number: "2164647", room: "332", lab: "LIT", building: 134 },
  { number: "2164695", room: "546", lab: "LIT", building: 134 },
  { number: "2164701", room: "509", lab: "LIT", building: 134 },
  { number: "2164709", room: "225", lab: "LIT", building: 134 },
  { number: "2164712", room: "501", lab: "LIT", building: 134 },
  { number: "2164713", room: "303", lab: "LIT", building: 134 },
  { number: "2164718", room: "550", lab: "LIT", building: 134 },
  { number: "2164717", room: "611", lab: "LIT", building: 134 },
  { number: "2164710", room: "317", lab: "LIT", building: 134 },
  { number: "2164730", room: "565", lab: "LIT", building: 134 },
  { number: "2164720", room: "430", lab: "LIT", building: 134 },
  { number: "2164719", room: "533", lab: "LIT", building: 134 },
  { number: "2164722", room: "337", lab: "LIT", building: 134 },
  { number: "2164728", room: "528", lab: "LIT", building: 134 },
  { number: "2164729", room: "510", lab: "LIT", building: 134 },
  { number: "2164731", room: "331", lab: "LIT", building: 134 },
  { number: "2164739", room: "527", lab: "LIT", building: 134 },
  { number: "2164740", room: "407v", lab: "LIT", building: 134 },
  { number: "2164781", room: "106", lab: "LIT", building: 134 },
  { number: "2164791", room: "304", lab: "LIT", building: 134 },
  { number: "2164767", room: "241", lab: "LIT", building: 134 },
  { number: "2164814", room: "537a", lab: "LIT", building: 134 },
  { number: "2164819", room: "302", lab: "LIT", building: 134 },
  { number: "2164817", room: "405a", lab: "LIT", building: 134 },
  { number: "2164826", room: "334", lab: "LIT", building: 134 },
  { number: "2164800", room: "362", lab: "LIT", building: 134 },
  { number: "2164808", room: "520", lab: "LIT", building: 134 },
  { number: "2164797", room: "326", lab: "LIT", building: 134 },
  { number: "2164880", room: "558", lab: "LIT", building: 134 },
  { number: "2164807", room: "431", lab: "LIT", building: 134 },
  { number: "2164845", room: "543", lab: "LIT", building: 134 },
  { number: "2164863", room: "348a", lab: "LIT", building: 134 },
  { number: "2164833", room: "547", lab: "LIT", building: 134 },
  { number: "2164858", room: "109a", lab: "LIT", building: 134 },
  { number: "2164874", room: "357", lab: "LIT", building: 134 },
  { number: "2164884", room: "567", lab: "LIT", building: 134 },
  { number: "2164869", room: "351", lab: "LIT", building: 134 },
  { number: "2164873", room: "352", lab: "LIT", building: 134 },
  { number: "2164875", room: "347", lab: "LIT", building: 134 },
  { number: "2164887", room: "512", lab: "LIT", building: 134 },
  { number: "2164906", room: "230", lab: "LIT", building: 134 },
  { number: "2164933", room: "549", lab: "LIT", building: 134 },
  { number: "2164922", room: "365", lab: "LIT", building: 134 },
  { number: "2164917", room: "336", lab: "LIT", building: 134 },
  { number: "2164920", room: "504", lab: "LIT", building: 134 },
  { number: "2164942", room: "433", lab: "LIT", building: 134 },
  { number: "2164944", room: "216a", lab: "LIT", building: 134 },
  { number: "2164994", room: "407a", lab: "LIT", building: 134 },
  { number: "2164959", room: "236", lab: "LIT", building: 134 },
  { number: "2164960", room: "500", lab: "LIT", building: 134 },
  { number: "2165020", room: "438", lab: "LIT", building: 134 },
  { number: "2165006", room: "612a", lab: "LIT", building: 134 },
  { number: "2165087", room: "407g", lab: "LIT", building: 134 },
  { number: "2165214", room: "210g", lab: "LIT", building: 134 },
  { number: "2165326", room: "564", lab: "LIT", building: 134 },
  { number: "2165354", room: "539", lab: "LIT", building: 134 },
  { number: "2165412", room: "376", lab: "LIT", building: 134 },
  { number: "2165446", room: "561", lab: "LIT", building: 134 },
  { number: "2165555", room: "203", lab: "LIT", building: 134 },
  { number: "2165573", room: "319", lab: "LIT", building: 134 },
  { number: "2165650", room: "202", lab: "LIT", building: 134 },
  { number: "2165622", room: "512", lab: "LIT", building: 134 },
  { number: "2165662", room: "229", lab: "LIT", building: 134 },
  { number: "2165771", room: "325", lab: "LIT", building: 134 },
  { number: "2165861", room: "428a", lab: "LIT", building: 134 },
  { number: "2165851", room: "432", lab: "LIT", building: 134 },
  { number: "2165850", room: "203", lab: "LIT", building: 134 },
  { number: "2165876", room: "560", lab: "LIT", building: 134 },
  { number: "2166029", room: "405a", lab: "LIT", building: 134 },
  { number: "2166484", room: "402a", lab: "LIT", building: 134 },
  {
    number: "2166569",
    room: "239",
    lab: "LIT",
    building: 134,
  },
  { number: "2166541", room: "515", lab: "LIT", building: 134 },
  { number: "2166939", room: "337a", lab: "LIT", building: 134 },
  { number: "2166979", room: "502", lab: "LIT", building: 134 },
  { number: "2167103", room: "610", lab: "LIT", building: 134 },
  { number: "2167102", room: "511", lab: "LIT", building: 134 },
  { number: "2167193", room: "601", lab: "LIT", building: 134 },
  { number: "2167301", room: "422", lab: "LIT", building: 134 },
  { number: "2167305", room: "406b", lab: "LIT", building: 134 },
  {
    number: "2167323",
    room: "524",
    lab: "LIT",
    building: 134,
  },
  { number: "2167390", room: "339", lab: "LIT", building: 134 },
  { number: "2167360", room: "307", lab: "LIT", building: 134 },
  { number: "2167424", room: "200", lab: "LIT", building: 134 },
  { number: "2167538", room: "601", lab: "LIT", building: 134 },
  { number: "2167553", room: "216b", lab: "LIT", building: 134 },
  { number: "2167573", room: "216b", lab: "LIT", building: 134 },
  { number: "2167598", room: "608", lab: "LIT", building: 134 },
  { number: "2165451", room: "229", lab: "LIT", building: 134 },
  { number: "2164653", room: "537a", lab: "LIT", building: 134 },
  { number: "2164910", room: "400b", lab: "LIT", building: 134 },
  { number: "2164317", room: "563", lab: "LIT", building: 134 },
  { number: "2164325", room: "102", lab: "LIT", building: 134 },
  { number: "2164090", room: "216v", lab: "LIT", building: 134 },
  { number: "2165702", room: "612", lab: "LIT", building: 134 },
  { number: "2165801", room: "443", lab: "LIT", building: 134 },
  { number: "2163998", room: "428", lab: "LIT", building: 134 },
  { number: "2164679", room: "210b", lab: "LIT", building: 134 },
  { number: "2164890", room: "403v", lab: "LIT", building: 134 },
  { number: "2163488", room: "216", lab: "LIT", building: 134 },
  { number: "2163916", room: "231", lab: "LIT", building: 134 },
  { number: "2162273", room: "358", lab: "LIT", building: 134 },
  { number: "2165106", room: "366", lab: "LIT", building: 134 },
  { number: "2165089", room: "432", lab: "LIT", building: 134 },
  { number: "2165145", room: "326", lab: "LIT", building: 134 },
  { number: "2165302", room: "505", lab: "LIT", building: 134 },
  { number: "2165349", room: "317", lab: "LIT", building: 134 },
  { number: "2165473", room: "314", lab: "LIT", building: 134 },
  { number: "2165436", room: "529a", lab: "LIT", building: 134 },
  { number: "2165462", room: "325", lab: "LIT", building: 134 },
  { number: "2165549", room: "215", lab: "LIT", building: 134 },
  { number: "2165550", room: "200a", lab: "LIT", building: 134 },
  { number: "2165562", room: "534", lab: "LIT", building: 134 },
  { number: "2165736", room: "322", lab: "LIT", building: 134 },
  { number: "2165778", room: "326", lab: "LIT", building: 134 },
  { number: "2165869", room: "330", lab: "LIT", building: 134 },
  { number: "2165908", room: "612r", lab: "LIT", building: 134 },
  { number: "2165936", room: "346", lab: "LIT", building: 134 },
  { number: "2165977", room: "523", lab: "LIT", building: 134 },
  { number: "2167403", room: "211", lab: "LIT", building: 134 },
  { number: "2167352", room: "404", lab: "LIT", building: 134 },
];

var check_sel;
var minimX = 1000000;
var maximX = -1000000;
var che;
var minimY = 1000000;
var maximY = -1000000;
var defaultDivColor = "##eeee00"
function toColor(num) {
    let out = ' ##'  + (+num).toString(16).padStart(6, '0');;
    return out;
}


function try_colorSQR(){
	let divs = lit.attributes.Departments;
 	for (i in divs){
            let divsqr;
            let sqrid='SQR'+divs[i].id;
            divsqr = document.getElementById(sqrid);
            if ( typeof(divsqr) !== "undefined" && divsqr !== null ) {
                 divsqr.style["background-color"]= toColor(divs[i].systemColor);
                 console.log('COLOR SQR '+sqrid+' '+JSON.stringify(divs[i])+' '+toColor( divs[i].systemColor));
                 console.log(toColor( divs[i].systemColor));
            }
            if (divs[i].id!=='643000'){continue;}
            sqrid='SQR606000';
            divsqr = document.getElementById(sqrid);
            if ( typeof(divsqr) !== "undefined" && divsqr !== null ) {
                 divsqr.style["background-color"]= toColor(divs[i].systemColor);
                 console.log('COLOR SQR '+sqrid+' '+JSON.stringify(divs[i])+' '+toColor( divs[i].systemColor));
                 console.log(toColor( divs[i].systemColor));
            }



		
    }
}
var a = {"Ё":"YO","Й":"I","Ц":"TS","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"SH","Щ":"SCH","З":"Z","Х":"H","Ъ":"'","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"'","Ф":"F","Ы":"I","В":"V","А":"А","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"'","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"'","б":"b","ю":"yu"};

function transliterate(word){
  return word.split('').map(function (char) { 
    return a[char] || char; 
  }).join("");
}
function getRoomPhone(roomName){
    let phlist = '';
    let roomn = transliterate(roomName.toLowerCase());
    for (i in phones){
        let r = phones[i].room;
        if (roomn.trim() == r){
            if (phlist.length>0){
                phlist +=  ', ';
            }
            phlist +=  phones[i].number;
        }
    }
    
    return phlist;
}


function getDivProp(div_code){
	let divs = lit.attributes.Departments;
 	for (i in divs){
//		console.log(i+' '+divs[i].id+' '+divs[i].name+' '+divs[i].systemColor);
		if (divs[i].id == div_code) {return divs[i]};
        }
	
	return "";
}

function showSotr(tabn){
 ShowDialog(); AjaxCall('popupCont', 'c=edit/personal&edit=no&tab_n='+tabn, true); ??right_level=333|pers_admin|personal_view
}


function getRoomCoordinates(roomData){
    let roomCoordinates = [];
    for (var j = 0; j < roomData.geometry.coordinates.length; j++) {
      roomCoordinates.push([
        rescaleY(roomData.geometry.coordinates[j][1]),
        rescaleX(roomData.geometry.coordinates[j][0]),
      ]);
    }
    return roomCoordinates;
}
function getRoomInfo(roomID){
    return rooms_info[roomID];
}

        function checki(select) {
        check_sel = -1;
//          console.log(check_sel);
          che = check_sel;
          if (check_sel == -1) {
            che = 0;
          }
          //alert("Вы выбрали " + check_sel + " этаж");
          for (j in lit.layers.Buildings.layerRaws) {
            //                console.log(j);
            if (lit.layers.Buildings.layerRaws[j].geometry.floor == check_sel) {
              var i = lit.layers.Buildings.layerRaws[j];
              //                    console.log(' I = ' + i);

              //                    console.log('floor=' + i.geometry.floor);
              for (coord_num in i.geometry.coordinates) {
//                console.log(
//                  "coord x1=" +
//                    i.geometry.coordinates[coord_num][0] +
//                    " y1=" +
//                    i.geometry.coordinates[coord_num][1]
//                );
                if ((+i.geometry.coordinates[coord_num][0]) > maximX) {
                  maximX = i.geometry.coordinates[coord_num][0];
                }
                if (+i.geometry.coordinates[coord_num][0] < minimX) {
                  minimX = i.geometry.coordinates[coord_num][0];
                }
                if (+i.geometry.coordinates[coord_num][1] > maximY) {
                  maximY = i.geometry.coordinates[coord_num][1];
                }
                if (+i.geometry.coordinates[coord_num][1] < minimY) {
                  minimY = i.geometry.coordinates[coord_num][1];
                }
              }
            }
          }
          console.log("X ", minimX, maximX);
          console.log("Y ", minimY, maximY);
        }

function fill_rooms_info(){
    let all_rooms_data = lit.layers.Rooms.layerRaws;
    var arr = [];
    for (let i = 0; i < all_rooms_data.length; i++){
        var room_id = all_rooms_data[i].properties.id;
        var room_name = all_rooms_data[i].properties.name.toUpperCase() ;
        var room_floor = all_rooms_data[i].geometry.floor;
        var ppls_arr = []
        for (let j = 0; j < lit_sotr.length; j++){
            let tmprooms = [lit_sotr[j].rooms.trim().toUpperCase()];
            if (lit_sotr[j].rooms.indexOf(',')>-1) {
                tmprooms = lit_sotr[j].rooms.toUpperCase().split(',');
                tmprooms.map(s => s.trim());
            }
            if (  ( lit_sotr[j].rooms.indexOf('403')>-1 ) & (room_name.indexOf('403')>-1 ) )
                          { 
                           console.log('=================================== '+room_name+' '+ tmprooms+' '+ tmprooms.indexOf(room_name));
                           }
            if (tmprooms.indexOf(room_name) > -1){
                let fio = lit_sotr[j].f + " " + lit_sotr[j].i + " " + lit_sotr[j].o;
                ppls_arr.push({"FL_ID":lit_sotr[j].fl_id, "TABN":lit_sotr[j].tabn, "TOPDIVCODE":lit_sotr[j].TopParent_code, "FIO":fio});
            }
        }
        var room_coord = getRoomCoordinates(all_rooms_data[i]);
        var minX = maxX = room_coord[0][0];
        var minY = maxY = room_coord[0][1];
        for (let b = 0; b < room_coord.length; b++){
            if (room_coord[b][0] < minX){
                minX = room_coord[b][0];
            }
            if (room_coord[b][0] > maxX){
                maxX = room_coord[b][0];
            }
            if (room_coord[b][1] < minY){
                minY = room_coord[b][1];
            }
            if (room_coord[b][1] > maxY){
                maxY = room_coord[b][1];
            }
        }
        var square = ((maxX - minX) * (maxY - minY) * 13 * 13) / 100;
        var size = 0;
        rooms_info[room_id] = {"id":room_id, "name":room_name, "floor":room_floor, "PPLS":ppls_arr, "SQR":square, "size":size, "geo_json":room_coord};
    //    if (room_name.indexOf('607')>-1) {console.log(   room_name+' ===   '+JSON.stringify(rooms_info[room_id]));}
    }
}




function centerRoom(room_num){
   if (room_num.length<2) {
        return;
    }
    
   let aa = $('[id='+room_num[0]+'][name=floornum]');
   console.log(room_num[0]) 
   aa.click();
   addRooms();
   for (r in rooms_info){
    console.log(room_num+' '+r+' '+rooms_info[r].name+' '+rooms_info);
    if (rooms_info[r].name == room_num.toUpperCase()){
        console.log('!!!!!!!!!! '+JSON.stringify(rooms_info[r].geo_json));
	let geo = [0,0];
	for (i in rooms_info[r].geo_json) {
		geo[0] += rooms_info[r].geo_json[i][0];
		geo[1] += rooms_info[r].geo_json[i][1];
		console.log('CENTER ROOM !!!!!!!!!!!!!!!!! ' +geo + '  '+i+'= '+rooms_info[r].geo_json[i])
	}
	geo[0] /=  rooms_info[r].geo_json.length;
	geo[1] /=  rooms_info[r].geo_json.length ;
	console.log(geo + '  '+rooms_info[r].geo_json.length );
        red_mark.setLatLng(geo);
        roomsGrp.addLayer(red_mark);
        lit_map.panTo(geo)
        break;
    }
   } 
    
}
var flip = false;

      function addRooms() {
/*
        floor_num = document.getElementById("selectFloorId");
        floor_num = floor_num.options[floor_num.selectedIndex].text;
        build_id = document.getElementById("select_get_building_id");
        build_id = build_id.options[build_id.selectedIndex].value;
        document.getElementById("create_room").checked = false;
        document.getElementById("create_icon").checked = false;

        for (let i = 0; i < poly_data.length; i++) {
          poly_data[i].remove();
        }
        poly_data = [];
        data_array = [];
        loadUserBuildingObject(build_id, floor_num, "rooms", callBackFunc);
*/
        floor_num = $("input[type='radio'][name='floornum']:checked").val();
        loadUserBuildingObject(build_id, floor_num, "rooms", callBackFunc);

      }

      function callBackFunc(data) {
        // console.log("callBackFunc" + JSON.stringify(data));
        if (data.length != undefined && data.length != 0) {
            addRooms_draw(data)
        } else {
          // alert("для текущего этажа нет комнат");
        }
      }




function addRooms_draw(data) {
  roomsGrp.clearLayers();
  console.log(' 111 addRooms '+roomsGrp +' lit='+ 'JSON.stringify(lit)');
  check_sel = $("input[type='radio'][name='floornum']:checked").val();
  let aaa = $("input[type='radio'][name='floornum']:checked");
  console.log('aaa='+aaa);
  let data = lit.layers.Rooms.layerRaws.filter(function (item, i, arr) {
    if (item.geometry.floor == check_sel) return item;
  });
//  console.log(check_sel+' Rooms '+ JSON.stringify(data));

  for (var i = 0; i < data.length; i++) {
//     console.log(' Room '+data[i].properties.name+' '+ JSON.stringify(data[i].geometry.coordinates));
    let latlngs = getRoomCoordinates(data[i]);
    var rColor = "##eeeeee";
    var roomName = data[i].properties.name;
    var descr = "";
    var Owner = "";
    var room_info = getRoomInfo(data[i].properties.id);
    if (roomName != ""){
        var descr = "<LNG L=ru>Комната</LNG>: "+ roomName+"<br>";
        let roomPhone = getRoomPhone(roomName);
        if (roomPhone.length>2){
            descr+="<LNG L=ru>Телефон</LNG>: "+ roomPhone+"<br>";
        }
//        console.log(latlngs);
        for (let j = 0; j < room_info.PPLS. length; j++){
            descr += "<a href='##' onclick='showSotr(+" + room_info.PPLS[j].TABN + ")';>"+room_info.PPLS[j].FIO + "</a><br>";
            Owner = room_info.PPLS[j].TOPDIVCODE;
//            console.log(roomName+' = '+JSON.stringify(room_info.PPLS[j])+' '+Owner);
        }
        if (Owner != "") {
               descr += "Отдел: " + divFunc(Owner) + "<br>";
               console.log('getDivProp '+JSON.stringify(getDivProp(Owner)));
               rColor = toColor((+getDivProp(Owner).systemColor));
        }
        
    }
        descr += "Площадь: " + parseInt(room_info.SQR)+' кв.м';


    console.log(roomName+' '+rColor)
    polyline = L.polygon(latlngs, {
      fillColor: rColor,
      fillOpacity: 0.9,
      color: "black",
      weight: 1,
    });

    polyline.bindTooltip(roomName, {
        permanent: true,
        direction: "center",
        className: "lhep_obj_tooltip",
      })
      .openTooltip();
    polyline.bindPopup(descr, {
      autoPanPaddingTopLeft: [50, 50],
      className: "lhep_obj_popup",
    }).on;
    roomsGrp.addLayer(polyline);
    room_info.geo_json = latlngs;
   console.log(' polyline '+latlngs+' '+JSON.stringify(room_info));
  }
try_colorSQR();

}

function test_room(){
  var latlngs = [
    [1, 1],
    [200, 200],
    [1, 300],
  ];
  polyline = L.polygon(latlngs, {
    fillOpacity: 1,
    color: "red",
    weight: 2,
  }).addTo(lit_map);
}


function rescaleX(x) {
    let aaa = x / 100;
  return parseInt(aaa);
}

function rescaleY(y) {
    let aaa = (minimY - (y - maximY)) / 100;
    return parseInt(aaa);
}


[end]
